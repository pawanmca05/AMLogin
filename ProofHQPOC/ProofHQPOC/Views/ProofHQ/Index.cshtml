
@{
    ViewBag.Title = "Index";
}

<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<style>
    .maindiv {
        width: 100%;
        height:500px;
        margin-left: 2.5%;
        margin-right: 2.5%;
        background-color:cyan;
        
    }

    .leftpannel{

         width:15%;
         margin-left:2%;
         height:400px;
         border:2px solid red;
         float:left;

    }
    .middlediv{
        width:60%;
        height:400px;
        border:2px solid red;
        margin-left:5%;
        float:left;
        margin-top:0px;
    }
    .error {
        color:red;
    }

</style>

<div class="maindiv">
    <h2>Index</h2>
    <div id="leftdiv" class="leftpannel">
     <ol id="prooflist">

     </ol>
    </div>
    <div class="middlediv">
        <ol id="comflist"></ol>
    </div>
    <div class="rightdiv">
        <p>Decision Status:<span class="error" id="idStatus"></span></p>
        <p>Proof Status:<span class="error" id="proofStatus"></span></p>
    </div>
</div>

<script>
    var whole ='';

   
    $(document).ready(function () {
        
        $.ajax({
            type: "GET",
            url: '/ProofHQ/GetAllProofs?Id=@ViewBag.Id',
            contentType: "application/json; charset=utf-8",
            //data: '{user: "' + $('#txtEmail').val() + '",pass:"'+$('#txtPass').val()+'" }',
            dataType: "json",
            success: function (data) {
                whole = data;
                for(i=0;i<data.length;i++)
                {
                    $('#prooflist').append('<li><a href="#" onclick=send('+data[i].file_id+');>' + data[i].filename + '</a></li>');
                   // alert(data[i].filename);
                }
            },
            error: function () {
               
                alert('error');
            }
        });

    });

</script>

<script>
    function send(id)
    {

        for (i = 0; i < whole.length; i++)
        {
            if(whole[i].file_id==id)
            {
                $('#idStatus').text(whole[i].decision);
                $('#proofStatus').text(whole[i].status);
            }
        }

        var fileId = id;
        $.ajax({
            type: "GET",
            url: '/ProofHQ/GetComments?Id=@ViewBag.Id &&fileId=' + id,
            contentType: "application/json; charset=utf-8",
           // data: '{Id: "@ViewBag.Id",fileId:"'+fileId+'" }',
            dataType: "json",
            success: function (data) {
                $('#comflist').html('');
                for (i = 0; i < data.length; i++) {
                    $('#comflist').append('<li>' + data[i].comment + '</li>');
                    // alert(data[i].filename);
                }
            },
            error: function () {

                alert('error');
            }
        });
    }

</script>

